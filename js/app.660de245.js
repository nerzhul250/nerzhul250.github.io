(function(e){function t(t){for(var i,s,l=t[0],r=t[1],d=t[2],u=0,m=[];u<l.length;u++)s=l[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&m.push(o[s][0]),o[s]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);c&&c(t);while(m.length)m.shift()();return n.push.apply(n,d||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],i=!0,l=1;l<a.length;l++){var r=a[l];0!==o[r]&&(i=!1)}i&&(n.splice(t--,1),e=s(s.s=a[0]))}return e}var i={},o={app:0},n=[];function s(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=i,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(a,i,function(t){return e[t]}.bind(null,i));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var c=r;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("b0c0"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[e.userIsLogged?a("div",[a("v-toolbar-title",[e._v("Holaaa! "+e._s(this.$store.state.user.nombre)+" "+e._s(this.$store.state.user.apellido))])],1):a("div",[a("p",[a("strong",[e._v("Logueate querido empleado")])])]),a("v-spacer"),e.userIsLogged?a("div",[a("router-link",{staticClass:"mr-5",attrs:{to:"/usuarios"}},[a("v-icon",[e._v("mdi-account-search")])],1),a("router-link",{staticClass:"mr-5",attrs:{to:"/dependencias"}},[a("v-icon",[e._v("mdi-account-group")])],1),a("v-btn",{attrs:{right:""},on:{click:e.logout}},[e._v("Deslogueate aca!")])],1):e._e()],1),a("v-main",[a("router-view")],1)],1)},n=[],s={name:"App",data:function(){return{}},computed:{userIsLogged:function(){return""!=this.$store.state.user.email}},methods:{logout:function(){this.$store.dispatch("logout"),this.$router.push("/")}}},l=s,r=a("2877"),d=a("6544"),c=a.n(d),u=a("7496"),m=a("40dc"),v=a("8336"),p=a("132d"),f=a("f6c4"),b=a("2fa4"),h=a("2a7f"),x=Object(r["a"])(l,o,n,!1,null,null,null),g=x.exports;c()(x,{VApp:u["a"],VAppBar:m["a"],VBtn:v["a"],VIcon:p["a"],VMain:f["a"],VSpacer:b["a"],VToolbarTitle:h["a"]});a("7db0"),a("d81d");var I=a("2f62"),_=a("8c4f"),k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"4"}}),a("v-col",{attrs:{cols:"4"}},[a("div",{staticClass:"mt-15"},[a("v-text-field",{attrs:{rules:e.emailRules,label:"Email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{label:"Password",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-btn",{on:{click:e.submit}},[e._v(" Submit ")])],1)]),a("v-col",{attrs:{cols:"4"}})],1)],1)],1)},V=[],w=a("6821"),y={name:"login",data:function(){return{valid:!1,email:"",emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/.+@.+/.test(e)||"E-mail must be valid"}],password:""}},methods:{submit:function(){var e={email:this.email,password:w(this.password)};this.$store.dispatch("login",e)}}},C=y,D=a("62ad"),T=a("a523"),$=a("4bd4"),O=a("0fd9"),j=a("8654"),S=Object(r["a"])(C,k,V,!1,null,"9ad33d72",null),A=S.exports;c()(S,{VBtn:v["a"],VCol:D["a"],VContainer:T["a"],VForm:$["a"],VRow:O["a"],VTextField:j["a"]});var E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-data-table",{attrs:{headers:e.headers,items:e.usuarios,search:e.search},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[e._v("Los usuarios del sistema")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"mr-5",attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-dialog",{attrs:{"max-width":"1000px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,o=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",o,!1),i),[e._v(" Nuevo usuario ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{label:"Nombre"},model:{value:e.editedItem.nombre,callback:function(t){e.$set(e.editedItem,"nombre",t)},expression:"editedItem.nombre"}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{label:"Apellido"},model:{value:e.editedItem.apellido,callback:function(t){e.$set(e.editedItem,"apellido",t)},expression:"editedItem.apellido"}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{label:"Email"},model:{value:e.editedItem.email,callback:function(t){e.$set(e.editedItem,"email",t)},expression:"editedItem.email"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"4"}},[a("v-checkbox",{attrs:{label:"Activo"},model:{value:e.editedItem.activo,callback:function(t){e.$set(e.editedItem,"activo",t)},expression:"editedItem.activo"}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-select",{attrs:{items:e.dependencias,"item-text":"nombre","return-object":""},model:{value:e.editedItem.dependencia,callback:function(t){e.$set(e.editedItem,"dependencia",t)},expression:"editedItem.dependencia"}})],1),a("v-col",{attrs:{cols:"4"}})],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-date-picker",{model:{value:e.editedItem.valido_hasta,callback:function(t){e.$set(e.editedItem,"valido_hasta",t)},expression:"editedItem.valido_hasta"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v(" Cancel ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v(" Save ")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Estas seguro de eliminar este usuario?")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("OK")]),a("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var i=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(i)}}},[e._v(" mdi-pencil ")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(i)}}},[e._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v(" Reset ")])]},proxy:!0}],null,!0)})},N=[],U=a("59ca"),L=a.n(U);a("e71f");var P={apiKey:"AIzaSyBDI4y4WnvKIMOjj5DVcmQ-tjZbkdhXV80",authDomain:"otavez-46bfe.firebaseapp.com",databaseURL:"https://otavez-46bfe.firebaseio.com",projectId:"otavez-46bfe",storageBucket:"otavez-46bfe.appspot.com",messagingSenderId:"834523069440",appId:"1:834523069440:web:9a811d0c3b1f8ae3b56ce5"};L.a.initializeApp(P);var z=L.a.firestore(),M=a("6821"),R={data:function(){return{usuarios:[],dependencias:[],dialog:!1,dialogDelete:!1,headers:[{text:"Nombre",value:"nombre"},{text:"Apellido",value:"apellido"},{text:"Email",value:"email"},{text:"Valido hasta",value:"valido_hasta"},{text:"Activo",value:"activo"},{text:"Dependencia",value:"dependencia.nombre"},{text:"Acciones",value:"actions",sortable:!1}],editedItem:{nombre:"",apellido:"",email:"",valido_hasta:"",activo:"",dependencia:""},defaultItem:{nombre:"",apellido:"",email:"",valido_hasta:"",activo:"",dependencia:""},editedIndex:-1,search:""}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo usuario":"Editar usuario"}},methods:{close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},closeDelete:function(){var e=this;this.dialogDelete=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},save:function(){if(-1!=this.editedIndex)this.editedItem.dependencia=z.collection("dependencias").doc(this.editedItem.dependencia.id),z.collection("usuarios").doc(this.editedIndex).set(this.editedItem);else{var e=this.editedItem;e.dependencia=z.collection("dependencias").doc(e.dependencia.id),e.password=M("123456"),z.collection("usuarios").add(e)}this.close()},editItem:function(e){this.editedIndex=e.id,this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){this.editedIndex=e.id,this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm:function(){z.collection("usuarios").doc(this.editedIndex).delete(),this.closeDelete()}},watch:{dialog:function(e){e||this.close()},dialogDelete:function(e){e||this.closeDelete()}},firestore:{usuarios:z.collection("usuarios"),dependencias:z.collection("dependencias")}},B=R,F=a("b0af"),K=a("99d9"),q=a("ac7c"),J=a("8fea"),H=a("2e4b"),Q=a("169a"),W=a("ce7e"),X=a("b974"),Z=a("71d9"),G=Object(r["a"])(B,E,N,!1,null,"2f49469b",null),Y=G.exports;c()(G,{VBtn:v["a"],VCard:F["a"],VCardActions:K["a"],VCardText:K["b"],VCardTitle:K["c"],VCheckbox:q["a"],VCol:D["a"],VContainer:T["a"],VDataTable:J["a"],VDatePicker:H["a"],VDialog:Q["a"],VDivider:W["a"],VIcon:p["a"],VRow:O["a"],VSelect:X["a"],VSpacer:b["a"],VTextField:j["a"],VToolbar:Z["a"],VToolbarTitle:h["a"]});var ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-data-table",{attrs:{headers:e.headers,items:e.dependencias},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[e._v("Las dependendencias del sistema")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"1000px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,o=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",o,!1),i),[e._v(" Nueva dependencia ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{label:"Nombre"},model:{value:e.editedItem.nombre,callback:function(t){e.$set(e.editedItem,"nombre",t)},expression:"editedItem.nombre"}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{label:"Coordinador"},model:{value:e.editedItem.coordinador,callback:function(t){e.$set(e.editedItem,"coordinador",t)},expression:"editedItem.coordinador"}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{label:"Ubicacion"},model:{value:e.editedItem.ubicacion,callback:function(t){e.$set(e.editedItem,"ubicacion",t)},expression:"editedItem.ubicacion"}})],1)],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{label:"Maximo Numero de usuarios",type:"number"},model:{value:e.editedItem.maximo_numero_usuarios,callback:function(t){e.$set(e.editedItem,"maximo_numero_usuarios",t)},expression:"editedItem.maximo_numero_usuarios"}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-checkbox",{attrs:{label:"Activa"},model:{value:e.editedItem.activa,callback:function(t){e.$set(e.editedItem,"activa",t)},expression:"editedItem.activa"}})],1),a("v-col",{attrs:{cols:"4"}}),a("v-row")],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v(" Cancel ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v(" Save ")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Estas seguro de eliminar esta dependencia?")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("OK")]),a("v-spacer")],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogUsers,callback:function(t){e.dialogUsers=t},expression:"dialogUsers"}},[a("v-list",e._l(e.usuarios,(function(t,i){return a("v-list-item",{key:i},[a("v-list-item-title",[e._v(" "+e._s(t.nombre)+" ")]),a("v-list-item-subtitle",[e._v(" "+e._s(t.apellido)+" ")])],1)})),1),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeShow}},[e._v("Cerrar")])],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var i=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(i)}}},[e._v(" mdi-pencil ")]),a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.deleteItem(i)}}},[e._v(" mdi-delete ")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.showDependencyUsers(i)}}},[e._v(" mdi-feature-search ")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v(" Reset ")])]},proxy:!0}],null,!0)})},te=[],ae={data:function(){return{dependencias:[],usuarios:[],dialog:!1,dialogDelete:!1,dialogUsers:!1,headers:[{text:"Nombre",value:"nombre"},{text:"Coordinador",value:"coordinador"},{text:"Ubicacion",value:"ubicacion"},{text:"Maxino numero de usuarios",value:"maximo_numero_usuarios"},{text:"Activa",value:"activa"},{text:"Acciones",value:"actions",sortable:!1}],editedItem:{nombre:"",coordinador:"",ubicacion:"",maximo_numero_usuarios:"",activa:""},defaultItem:{nombre:"",coordinador:"",ubicacion:"",maximo_numero_usuarios:"",activa:""},editedIndex:-1,showingDependency:""}},computed:{formTitle:function(){return-1===this.editedIndex?"Nueva dependencia":"Editar dependencia"}},methods:{close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},closeDelete:function(){var e=this;this.dialogDelete=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},closeShow:function(){var e=this;this.dialogUsers=!1,this.$nextTick((function(){e.usuarios=[],e.showingDependency=""}))},save:function(){-1!=this.editedIndex?z.collection("dependencias").doc(this.editedIndex).set(this.editedItem):z.collection("dependencias").add(this.editedItem),this.close()},editItem:function(e){this.editedIndex=e.id,this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){var t=this;z.collection("usuarios").where("dependencia","==",z.collection("dependencias").doc(e.id)).get().then((function(a){var i=a.docs.map((function(e){return e.data()}));i&&i.length?t.$alert("Oye manito, esta dependencia aun tiene usuarios"):(t.editedIndex=e.id,t.editedItem=Object.assign({},e),t.dialogDelete=!0)}))},deleteItemConfirm:function(){z.collection("dependencias").doc(this.editedIndex).delete(),this.closeDelete()},showDependencyUsers:function(e){var t=this;this.dialogUsers=!0,this.showingDependency=e,z.collection("usuarios").where("dependencia","==",z.collection("dependencias").doc(e.id)).get().then((function(e){var a=e.docs.map((function(e){return e.data()}));t.usuarios=a}))}},watch:{dialog:function(e){e||this.close()},dialogDelete:function(e){e||this.closeDelete()},dialogUsers:function(e){e||this.closeShow()}},firestore:{dependencias:z.collection("dependencias")}},ie=ae,oe=a("8860"),ne=a("da13"),se=a("5d23"),le=Object(r["a"])(ie,ee,te,!1,null,"d2e8a960",null),re=le.exports;c()(le,{VBtn:v["a"],VCard:F["a"],VCardActions:K["a"],VCardText:K["b"],VCardTitle:K["c"],VCheckbox:q["a"],VCol:D["a"],VContainer:T["a"],VDataTable:J["a"],VDialog:Q["a"],VDivider:W["a"],VIcon:p["a"],VList:oe["a"],VListItem:ne["a"],VListItemSubtitle:se["b"],VListItemTitle:se["c"],VRow:O["a"],VSpacer:b["a"],VTextField:j["a"],VToolbar:Z["a"],VToolbarTitle:h["a"]}),i["a"].use(_["a"]);var de=new _["a"]({routes:[{path:"/",name:"login",component:A},{path:"/usuarios",name:"usuarios",component:Y},{path:"/dependencias",name:"dependencias",component:re}]});i["a"].use(I["a"]);var ce=new I["a"].Store({state:{user:{nombre:"",apellido:"",email:""}},actions:{login:function(e,t){var a=e.commit;z.collection("usuarios").get().then((function(e){var i=e.docs.map((function(e){return e.data()})),o=i.find((function(e){return e.email===t.email&e.password===t.password}));return!!o&&(a("setEmail",o.email),a("setNombre",o.nombre),a("setApellido",o.apellido),de.push("/usuarios"),!0)}))},logout:function(e){var t=e.commit;return t("setEmail",""),t("setNombre",""),t("setApellido",""),!0}},mutations:{setEmail:function(e,t){e.user.email=t},setNombre:function(e,t){e.user.nombre=t},setApellido:function(e,t){e.user.apellido=t}}}),ue=(a("5363"),a("f309"));i["a"].use(ue["a"]);var me=new ue["a"]({}),ve=a("683f"),pe=a("0ff2");i["a"].config.productionTip=!1,i["a"].use(pe["a"]),i["a"].use(ve["a"]),de.beforeEach((function(e,t,a){return"login"===e.name&&""!=ce.state.user.email?a({path:"/usuarios"}):(console.log(ce.state.user.email),""===ce.state.user.email&&"login"!=e.name?a({path:"/"}):a())})),new i["a"]({store:ce,router:de,vuetify:me,render:function(e){return e(g)}}).$mount("#app")}});
//# sourceMappingURL=app.660de245.js.map